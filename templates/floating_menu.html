<!-- floating_menu.html -->
<style>
  .floating-toggle {
    position: fixed;
    bottom: 18px;
    left: 50%;
    transform: translateX(-50%);
    width: 58px; height: 58px;
    background: transparent;
    border-radius: 50%;
    display: flex; justify-content: center; align-items: center;
    z-index: 1000; cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }
  .floating-menu {
    position: fixed;
    bottom: 90px; left: 50%;
    transform: translateX(-50%);
    background: #fff; border-radius: 16px;
    padding: 10px; display: none;
    flex-direction: column; align-items: center; gap: 10px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    z-index: 999; max-height: 60vh; overflow-y: auto;
  }
  .floating-menu a img {
    width: 52px; height: 52px;
  }
</style>

<div id="floatingToggle" class="floating-toggle" aria-label="Toggle menu" role="button" tabindex="0">
  <img src="{{ url_for('static', filename='icon/icon_menu_toggle.png') }}" alt="menu" width="60" height="60">
</div>

<div id="floatingMenu" class="floating-menu" aria-hidden="true">
  <a href="{{ url_for('dashboard') }}"><img src="{{ url_for('static', filename='icon/icon_dashboard.png') }}" alt="Dashboard"></a>
  <a href="{{ url_for('sale_summary') }}"><img src="{{ url_for('static', filename='icon/icon_sale_summary.png') }}" alt="Sale summary"></a>
  <a href="{{ url_for('crm') }}"><img src="{{ url_for('static', filename='icon/icon_crm.png') }}" alt="CRM"></a>
  <a href="{{ url_for('record_sales') }}"><img src="{{ url_for('static', filename='icon/icon_record_sales.png') }}" alt="Record sales"></a>
  <a href="{{ url_for('customer_list') }}"><img src="{{ url_for('static', filename='icon/icon_customer_list.png') }}" alt="Customer list"></a>
  <a href="{{ url_for('record_customer') }}"><img src="{{ url_for('static', filename='icon/icon_customer_history.png') }}" alt="Record customer"></a>
  <a href="{{ url_for('oldsaledata') }}"><img src="{{ url_for('static', filename='icon/icon_old_customers.png') }}" alt="Old customers"></a>
  <a href="{{ url_for('inventory') }}"><img src="{{ url_for('static', filename='icon/icon_inventory.png') }}" alt="Inventory"></a>
  <a href="{{ url_for('staff') }}"><img src="{{ url_for('static', filename='icon/icon_staff.png') }}" alt="Staff"></a>
  <a href="{{ url_for('appointments') }}"><img src="{{ url_for('static', filename='icon/icon_appointments.png') }}" alt="Appointments"></a>
</div>

<script>
  const toggleBtn = document.getElementById('floatingToggle');
  const menu = document.getElementById('floatingMenu');

  function setMenu(open) {
    menu.style.display = open ? 'flex' : 'none';
    menu.setAttribute('aria-hidden', open ? 'false' : 'true');
  }
  function toggleFloatingMenu() {
    setMenu(menu.style.display !== 'flex');
  }

  // open/close
  toggleBtn.addEventListener('click', toggleFloatingMenu);
  toggleBtn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleFloatingMenu(); }
  });

  // click outside to close
  document.addEventListener('click', (e) => {
    if (!toggleBtn.contains(e.target) && !menu.contains(e.target)) setMenu(false);
  });

  // ESC to close
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') setMenu(false);
  });
</script>
